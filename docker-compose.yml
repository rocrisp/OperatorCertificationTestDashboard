# Docker Compose for local development
# Usage: docker-compose up -d

version: '3.8'

services:
  dashboard:
    build:
      context: .
      dockerfile: Dockerfile
    ports:
      - "5001:5001"
    environment:
      - REMOTE_HOST=${REMOTE_HOST:-rdu2}
      - SSH_USER=${SSH_USER:-root}
      - REMOTE_BASE_DIR=${REMOTE_BASE_DIR:-/root/test-rose/certsuite}
      - REPORT_DIR=${REPORT_DIR:-/var/www/html}
      - DEBUG=true
    volumes:
      # Mount SSH key for remote access
      - ${SSH_KEY_PATH:-~/.ssh/id_rsa}:/home/dashboard/.ssh/id_rsa:ro
      # Mount logs directory
      - ./logs:/app/logs
    restart: unless-stopped
